{"ast":null,"code":"var _jsxFileName = \"C:\\\\xampp\\\\htdocs\\\\undangan_digital_platform\\\\frontend-admin\\\\src\\\\components\\\\GuestListModal.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { Modal, Button, Table, Form, InputGroup, Spinner, Alert } from 'react-bootstrap';\nimport api from '../api'; // Gunakan api.js\nimport Papa from 'papaparse';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst GuestListModal = ({\n  show,\n  onHide,\n  invitation\n}) => {\n  _s();\n  const [guests, setGuests] = useState([]);\n  const [newGuestName, setNewGuestName] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const fileInputRef = useRef(null);\n  const fetchGuests = async () => {\n    if (!invitation) return;\n    setLoading(true);\n    setError('');\n    try {\n      const response = await api.get(`/guests/read.php?invitation_id=${invitation.id}`);\n      setGuests(response.data || []);\n    } catch (err) {\n      setError('Gagal memuat daftar tamu.');\n    } finally {\n      setLoading(false);\n    }\n  };\n  useEffect(() => {\n    if (show) {\n      fetchGuests();\n    }\n  }, [show, invitation]);\n  const handleAddGuest = async e => {\n    e.preventDefault();\n    if (!newGuestName.trim()) return;\n    try {\n      await api.post('/guests/create.php', {\n        invitation_id: invitation.id,\n        guests: [newGuestName]\n      });\n      setNewGuestName('');\n      fetchGuests();\n    } catch (err) {\n      alert('Gagal menambah tamu.');\n    }\n  };\n  const handleDeleteGuest = async guestId => {\n    if (window.confirm('Yakin ingin menghapus tamu ini?')) {\n      try {\n        await api.post('/guests/delete.php', {\n          id: guestId\n        });\n        fetchGuests();\n      } catch (err) {\n        alert('Gagal menghapus tamu.');\n      }\n    }\n  };\n  const handleImportCSV = e => {\n    const file = e.target.files[0];\n    if (!file) return;\n    Papa.parse(file, {\n      header: true,\n      skipEmptyLines: true,\n      complete: async results => {\n        const names = results.data.map(row => row.Nama || row.Name).filter(Boolean);\n        if (names.length === 0) {\n          alert('Tidak ada nama valid. Pastikan ada kolom \"Nama\" atau \"Name\".');\n          return;\n        }\n        try {\n          await api.post('/guests/create.php', {\n            invitation_id: invitation.id,\n            guests: names\n          });\n          alert(`${names.length} tamu berhasil diimpor.`);\n          fetchGuests();\n        } catch (err) {\n          alert('Gagal mengimpor tamu dari CSV.');\n        }\n      }\n    });\n    e.target.value = null;\n  };\n\n  // ... (Fungsi handleCopyLink dan isi JSX tidak ada perubahan) ...\n  const handleCopyLink = guestName => {/* ... */};\n  return /*#__PURE__*/_jsxDEV(Modal, {\n    show: show,\n    onHide: onHide,\n    size: \"lg\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 74,\n    columnNumber: 9\n  }, this);\n};\n_s(GuestListModal, \"dX8yu/i2ZJVYAXqwTP3YucwHg9w=\");\n_c = GuestListModal;\nexport default GuestListModal;\nvar _c;\n$RefreshReg$(_c, \"GuestListModal\");","map":{"version":3,"names":["React","useState","useEffect","useRef","Modal","Button","Table","Form","InputGroup","Spinner","Alert","api","Papa","jsxDEV","_jsxDEV","GuestListModal","show","onHide","invitation","_s","guests","setGuests","newGuestName","setNewGuestName","loading","setLoading","error","setError","fileInputRef","fetchGuests","response","get","id","data","err","handleAddGuest","e","preventDefault","trim","post","invitation_id","alert","handleDeleteGuest","guestId","window","confirm","handleImportCSV","file","target","files","parse","header","skipEmptyLines","complete","results","names","map","row","Nama","Name","filter","Boolean","length","value","handleCopyLink","guestName","size","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/xampp/htdocs/undangan_digital_platform/frontend-admin/src/components/GuestListModal.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport { Modal, Button, Table, Form, InputGroup, Spinner, Alert } from 'react-bootstrap';\r\nimport api from '../api'; // Gunakan api.js\r\nimport Papa from 'papaparse';\r\n\r\nconst GuestListModal = ({ show, onHide, invitation }) => {\r\n    const [guests, setGuests] = useState([]);\r\n    const [newGuestName, setNewGuestName] = useState('');\r\n    const [loading, setLoading] = useState(false);\r\n    const [error, setError] = useState('');\r\n    const fileInputRef = useRef(null);\r\n\r\n    const fetchGuests = async () => {\r\n        if (!invitation) return;\r\n        setLoading(true);\r\n        setError('');\r\n        try {\r\n            const response = await api.get(`/guests/read.php?invitation_id=${invitation.id}`);\r\n            setGuests(response.data || []);\r\n        } catch (err) {\r\n            setError('Gagal memuat daftar tamu.');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    useEffect(() => { if (show) { fetchGuests(); } }, [show, invitation]);\r\n\r\n    const handleAddGuest = async (e) => {\r\n        e.preventDefault();\r\n        if (!newGuestName.trim()) return;\r\n        try {\r\n            await api.post('/guests/create.php', { invitation_id: invitation.id, guests: [newGuestName] });\r\n            setNewGuestName('');\r\n            fetchGuests();\r\n        } catch (err) { alert('Gagal menambah tamu.'); }\r\n    };\r\n\r\n    const handleDeleteGuest = async (guestId) => {\r\n        if (window.confirm('Yakin ingin menghapus tamu ini?')) {\r\n            try {\r\n                await api.post('/guests/delete.php', { id: guestId });\r\n                fetchGuests();\r\n            } catch (err) { alert('Gagal menghapus tamu.'); }\r\n        }\r\n    };\r\n\r\n    const handleImportCSV = (e) => {\r\n        const file = e.target.files[0];\r\n        if (!file) return;\r\n        Papa.parse(file, {\r\n            header: true,\r\n            skipEmptyLines: true,\r\n            complete: async (results) => {\r\n                const names = results.data.map(row => row.Nama || row.Name).filter(Boolean);\r\n                if (names.length === 0) {\r\n                    alert('Tidak ada nama valid. Pastikan ada kolom \"Nama\" atau \"Name\".');\r\n                    return;\r\n                }\r\n                try {\r\n                    await api.post('/guests/create.php', { invitation_id: invitation.id, guests: names });\r\n                    alert(`${names.length} tamu berhasil diimpor.`);\r\n                    fetchGuests();\r\n                } catch (err) { alert('Gagal mengimpor tamu dari CSV.'); }\r\n            }\r\n        });\r\n        e.target.value = null;\r\n    };\r\n    \r\n    // ... (Fungsi handleCopyLink dan isi JSX tidak ada perubahan) ...\r\n    const handleCopyLink = (guestName) => { /* ... */ };\r\n\r\n    return (\r\n        <Modal show={show} onHide={onHide} size=\"lg\">\r\n             {/* ... (Isi JSX tidak ada perubahan) ... */}\r\n        </Modal>\r\n    );\r\n};\r\n\r\nexport default GuestListModal;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}